<!DOCTYPE html>
<html lang="en">

<head>
    <title>three.js webgl - materials - shaders [Fresnel]</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="js/Treant/Treant.css" type="text/css" />
</head>

<body>
    <script src="js/Treant/vendor/raphael.js"></script>
    <script src="js/Treant/Treant.js"></script>
    <script src="js/book_tree.js"></script>
    <script>
	var formData = new FormData();

    var xhr = new XMLHttpRequest();
    //var url = "http://localhost:13456/setbookchapter/";
    var url = "http://84.89.136.194:13456/setbookchapter/";
    xhr.open("POST", url);
    xhr.setRequestHeader("Content-type", "application/json; charset=utf-8");
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var json = JSON.parse(xhr.responseText);
            console.log(json.email + ", " + json.password);
        }
    };

    var new_chapter = {
        "parent": "1",
        "title": "Un altre capítol d'aquests",
        "text": "Més text",
        "chapter_author": "Un altre autor",
        "state": "on_progress",
        "is_terminal": "false",
        "children": [{
                "text": "Opció 1 un altre cop"
            },
            {
                "text": "Una altra opció (la 2, en aquest cas)"
            }
        ]
    }

    var blob = new Blob([JSON.stringify(new_chapter)], { type: "text/json"});
    formData.append("webmasterfile", blob);
    xhr.send(formData);

    // node_html_template = "<div class=node-container> <span>  </span></div>"


    // book_tree = new BookTree("body");
    // nodeStructure = {
    //     text: { name: "Primer capítol" },
    //     innerHTML : "<button class=book-node id=1_1>Primer Capítol</button>",
    //     children: [{
    //             text: { name: "S'escapa" }
    //         },
    //         {
    //             text: { name: "S'escapa 2" },
    //             children: [{
    //                 text: { name: "L'acaba trobant" }
    //             }]
    //         }
    //     ]
    // }

    // book_tree.loadTree(nodeStructure);
    </script>
</body>

</html>